/*! ColVis 1.1.2
 * Â©2010-2015 SpryMedia Ltd - datatables.net/license
 */
(function(c,a,d){var b=function(g,f){var e=function(j,i){if(!this.CLASS||this.CLASS!="ColVis"){alert("Warning: ColVis must be initialised with the keyword 'new'")}if(typeof i=="undefined"){i={}}var h=g.fn.dataTable.camelToHungarian;if(h){h(e.defaults,e.defaults,true);h(e.defaults,i)}this.s={dt:null,oInit:i,hidden:true,abOriginal:[]};this.dom={wrapper:null,button:null,collection:null,background:null,catcher:null,buttons:[],groupButtons:[],restore:null};e.aInstances.push(this);this.s.dt=g.fn.dataTable.Api?new g.fn.dataTable.Api(j).settings()[0]:j;this._fnConstruct(i);return this};e.prototype={button:function(){return this.dom.wrapper},fnRebuild:function(){this.rebuild()},rebuild:function(){for(var h=this.dom.buttons.length-1;h>=0;h--){this.dom.collection.removeChild(this.dom.buttons[h])}this.dom.buttons.splice(0,this.dom.buttons.length);this.dom.groupButtons.splice(0,this.dom.groupButtons.length);if(this.dom.restore){this.dom.restore.parentNode(this.dom.restore)}this._fnAddGroups();this._fnAddButtons();this._fnDrawCallback()},_fnConstruct:function(l){this._fnApplyCustomisation(l);var k=this;var j,h;this.dom.wrapper=a.createElement("div");this.dom.wrapper.className="ColVis";this.dom.button=g("<button />",{"class":!this.s.dt.bJUI?"ColVis_Button ColVis_MasterButton":"ColVis_Button ColVis_MasterButton ui-button ui-state-default"}).append("<span>"+this.s.buttonText+"</span>").bind(this.s.activate=="mouseover"?"mouseover":"click",function(i){i.preventDefault();k._fnCollectionShow()}).appendTo(this.dom.wrapper)[0];this.dom.catcher=this._fnDomCatcher();this.dom.collection=this._fnDomCollection();this.dom.background=this._fnDomBackground();this._fnAddGroups();this._fnAddButtons();for(j=0,h=this.s.dt.aoColumns.length;j<h;j++){this.s.abOriginal.push(this.s.dt.aoColumns[j].bVisible)}this.s.dt.aoDrawCallback.push({fn:function(){k._fnDrawCallback.call(k)},sName:"ColVis"});g(this.s.dt.oInstance).bind("column-reorder.dt",function(o,n,m){for(j=0,h=k.s.aiExclude.length;j<h;j++){k.s.aiExclude[j]=m.aiInvertMapping[k.s.aiExclude[j]]}var i=k.s.abOriginal.splice(m.iFrom,1)[0];k.s.abOriginal.splice(m.iTo,0,i);k.fnRebuild()});g(this.s.dt.oInstance).bind("destroy.dt",function(){g(k.dom.wrapper).remove()});this._fnDrawCallback()},_fnApplyCustomisation:function(m){g.extend(true,this.s,e.defaults,m);if(!this.s.showAll&&this.s.bShowAll){this.s.showAll=this.s.sShowAll}if(!this.s.restore&&this.s.bRestore){this.s.restore=this.s.sRestore}var h=this.s.groups;var l=this.s.aoGroups;if(h){for(var k=0,j=h.length;k<j;k++){if(h[k].title){l[k].sTitle=h[k].title}if(h[k].columns){l[k].aiColumns=h[k].columns}}}},_fnDrawCallback:function(){var k=this.s.dt.aoColumns;var o=this.dom.buttons;var h=this.s.aoGroups;var n;for(var m=0,r=o.length;m<r;m++){n=o[m];if(n.__columnIdx!==d){g("input",n).prop("checked",k[n.__columnIdx].bVisible)}}var q=function(t){for(var i=0,j=t.length;i<j;i++){if(k[t[i]].bVisible===false){return false}}return true};var p=function(j){for(var i=0,t=j.length;i<t;i++){if(k[j[i]].bVisible===true){return false}}return true};for(var l=0,s=h.length;l<s;l++){if(q(h[l].aiColumns)){g("input",this.dom.groupButtons[l]).prop("checked",true);g("input",this.dom.groupButtons[l]).prop("indeterminate",false)}else{if(p(h[l].aiColumns)){g("input",this.dom.groupButtons[l]).prop("checked",false);g("input",this.dom.groupButtons[l]).prop("indeterminate",false)}else{g("input",this.dom.groupButtons[l]).prop("indeterminate",true)}}}},_fnAddGroups:function(){var k;if(typeof this.s.aoGroups!="undefined"){for(var j=0,h=this.s.aoGroups.length;j<h;j++){k=this._fnDomGroupButton(j);this.dom.groupButtons.push(k);this.dom.buttons.push(k);this.dom.collection.appendChild(k)}}},_fnAddButtons:function(){var l,k=this.s.dt.aoColumns;if(g.inArray("all",this.s.aiExclude)===-1){for(var j=0,h=k.length;j<h;j++){if(g.inArray(j,this.s.aiExclude)===-1){l=this._fnDomColumnButton(j);l.__columnIdx=j;this.dom.buttons.push(l)}}}if(this.s.order==="alpha"){this.dom.buttons.sort(function(m,i){var o=k[m.__columnIdx].sTitle;var n=k[i.__columnIdx].sTitle;return o===n?0:o<n?-1:1})}if(this.s.restore){l=this._fnDomRestoreButton();l.className+=" ColVis_Restore";this.dom.buttons.push(l)}if(this.s.showAll){l=this._fnDomShowXButton(this.s.showAll,true);l.className+=" ColVis_ShowAll";this.dom.buttons.push(l)}if(this.s.showNone){l=this._fnDomShowXButton(this.s.showNone,false);l.className+=" ColVis_ShowNone";this.dom.buttons.push(l)}g(this.dom.collection).append(this.dom.buttons)},_fnDomRestoreButton:function(){var i=this,h=this.s.dt;return g('<li class="ColVis_Special '+(h.bJUI?"ui-button ui-state-default":"")+'">'+this.s.restore+"</li>").click(function(l){for(var k=0,j=i.s.abOriginal.length;k<j;k++){i.s.dt.oInstance.fnSetColumnVis(k,i.s.abOriginal[k],false)}i._fnAdjustOpenRows();i.s.dt.oInstance.fnAdjustColumnSizing(false);i.s.dt.oInstance.fnDraw(false)})[0]},_fnDomShowXButton:function(k,j){var i=this,h=this.s.dt;return g('<li class="ColVis_Special '+(h.bJUI?"ui-button ui-state-default":"")+'">'+k+"</li>").click(function(n){for(var m=0,l=i.s.abOriginal.length;m<l;m++){if(i.s.aiExclude.indexOf(m)===-1){i.s.dt.oInstance.fnSetColumnVis(m,j,false)}}i._fnAdjustOpenRows();i.s.dt.oInstance.fnAdjustColumnSizing(false);i.s.dt.oInstance.fnDraw(false)})[0]},_fnDomGroupButton:function(j){var l=this,k=this.s.dt,h=this.s.aoGroups[j];return g('<li class="ColVis_Special '+(k.bJUI?"ui-button ui-state-default":"")+'"><label><input type="checkbox" /><span>'+h.sTitle+"</span></label></li>").click(function(m){var n=!g("input",this).is(":checked");if(m.target.nodeName.toLowerCase()!=="li"){n=!n}for(var i=0;i<h.aiColumns.length;i++){l.s.dt.oInstance.fnSetColumnVis(h.aiColumns[i],n)}})[0]},_fnDomColumnButton:function(h){var l=this,j=this.s.dt.aoColumns[h],k=this.s.dt;var m=this.s.fnLabel===null?j.sTitle:this.s.fnLabel(h,j.sTitle,j.nTh);return g("<li "+(k.bJUI?'class="ui-button ui-state-default"':"")+'><label><input type="checkbox" /><span>'+m+"</span></label></li>").click(function(i){var n=!g("input",this).is(":checked");if(i.target.nodeName.toLowerCase()!=="li"){if(i.target.nodeName.toLowerCase()=="input"||l.s.fnStateChange===null){n=!n}}var o=g.fn.dataTableExt.iApiIndex;g.fn.dataTableExt.iApiIndex=l._fnDataTablesApiIndex.call(l);if(k.oFeatures.bServerSide){l.s.dt.oInstance.fnSetColumnVis(h,n,false);l.s.dt.oInstance.fnAdjustColumnSizing(false);if(k.oScroll.sX!==""||k.oScroll.sY!==""){l.s.dt.oInstance.oApi._fnScrollDraw(l.s.dt)}l._fnDrawCallback()}else{l.s.dt.oInstance.fnSetColumnVis(h,n)}g.fn.dataTableExt.iApiIndex=o;if(l.s.fnStateChange!==null){if(i.target.nodeName.toLowerCase()=="span"){i.preventDefault()}l.s.fnStateChange.call(l,h,n)}})[0]},_fnDataTablesApiIndex:function(){for(var j=0,h=this.s.dt.oInstance.length;j<h;j++){if(this.s.dt.oInstance[j]==this.s.dt.nTable){return j}}return 0},_fnDomCollection:function(){return g("<ul />",{"class":!this.s.dt.bJUI?"ColVis_collection":"ColVis_collection ui-buttonset ui-buttonset-multi"}).css({display:"none",opacity:0,position:!this.s.bCssPosition?"absolute":""})[0]},_fnDomCatcher:function(){var i=this,h=a.createElement("div");h.className="ColVis_catcher";g(h).click(function(){i._fnCollectionHide.call(i,null,null)});return h},_fnDomBackground:function(){var i=this;var h=g("<div></div>").addClass("ColVis_collectionBackground").css("opacity",0).click(function(){i._fnCollectionHide.call(i,null,null)});if(this.s.activate=="mouseover"){h.mouseover(function(){i.s.overcollection=false;i._fnCollectionHide.call(i,null,null)})}return h[0]},_fnCollectionShow:function(){var q=this,o,m,p;var s=g(this.dom.button).offset();var n=this.dom.collection;var k=this.dom.background;var j=parseInt(s.left,10);var h=parseInt(s.top+g(this.dom.button).outerHeight(),10);if(!this.s.bCssPosition){n.style.top=h+"px";n.style.left=j+"px"}g(n).css({display:"block",opacity:0});k.style.bottom="0px";k.style.right="0px";var u=this.dom.catcher.style;u.height=g(this.dom.button).outerHeight()+"px";u.width=g(this.dom.button).outerWidth()+"px";u.top=s.top+"px";u.left=j+"px";a.body.appendChild(k);a.body.appendChild(n);a.body.appendChild(this.dom.catcher);g(n).animate({opacity:1},q.s.iOverlayFade);g(k).animate({opacity:0.1},q.s.iOverlayFade,"linear",function(){if(g.browser&&g.browser.msie&&g.browser.version=="6.0"){q._fnDrawCallback()}});if(!this.s.bCssPosition){p=(this.s.sAlign=="left")?j:j-g(n).outerWidth()+g(this.dom.button).outerWidth();n.style.left=p+"px";var l=g(n).outerWidth();var t=g(n).outerHeight();var r=g(a).width();if(p+l>r){n.style.left=(r-l)+"px"}}this.s.hidden=false},_fnCollectionHide:function(){var h=this;if(!this.s.hidden&&this.dom.collection!==null){this.s.hidden=true;g(this.dom.collection).animate({opacity:0},h.s.iOverlayFade,function(i){this.style.display="none"});g(this.dom.background).animate({opacity:0},h.s.iOverlayFade,function(i){a.body.removeChild(h.dom.background);a.body.removeChild(h.dom.catcher)})}},_fnAdjustOpenRows:function(){var l=this.s.dt.aoOpenRows;var j=this.s.dt.oApi._fnVisbleColumns(this.s.dt);for(var k=0,h=l.length;k<h;k++){l[k].nTr.getElementsByTagName("td")[0].colSpan=j}}};e.fnRebuild=function(j){var k=null;if(typeof j!="undefined"){k=g.fn.dataTable.Api?new g.fn.dataTable.Api(j).table().node():j.fnSettings().nTable}for(var l=0,h=e.aInstances.length;l<h;l++){if(typeof j=="undefined"||k==e.aInstances[l].s.dt.nTable){e.aInstances[l].fnRebuild()}}};e.defaults={active:"click",buttonText:"Show / hide columns",aiExclude:[],bRestore:false,sRestore:"Restore original",bShowAll:false,sShowAll:"Show All",sAlign:"left",fnStateChange:null,iOverlayFade:500,fnLabel:null,bCssPosition:false,aoGroups:[],order:"column"};e.aInstances=[];e.prototype.CLASS="ColVis";e.VERSION="1.1.2";e.prototype.VERSION=e.VERSION;if(typeof g.fn.dataTable=="function"&&typeof g.fn.dataTableExt.fnVersionCheck=="function"&&g.fn.dataTableExt.fnVersionCheck("1.7.0")){g.fn.dataTableExt.aoFeatures.push({fnInit:function(j){var h=j.oInit;var i=new e(j,h.colVis||h.oColVis||{});return i.button()},cFeature:"C",sFeature:"ColVis"})}else{alert("Warning: ColVis requires DataTables 1.7 or greater - www.datatables.net/download")}g.fn.dataTable.ColVis=e;g.fn.DataTable.ColVis=e;return e};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],b)}else{if(typeof exports==="object"){b(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.ColVis){b(jQuery,jQuery.fn.dataTable)}}}})(window,document);